# なぜ rodio を音声再生に選ぶのか

このドキュメントでは、BGM・SE の再生に rodio を採用した技術的根拠を説明します。音声サブシステムの根幹となる選択です。

---

## 目次

1. [rodio とは](#1-rodio-とは)
2. [採用理由](#2-採用理由)
3. [本プロジェクトでの利用](#3-本プロジェクトでの利用)
4. [関連ドキュメント](#4-関連ドキュメント)

---

## 1. rodio とは

rodio は、Rust のクロスプラットフォーム音声再生ライブラリです。

- **バージョン**: rodio 0.21（features: ["playback", "wav", "vorbis"]）（Cargo.toml）
- **役割**: BGM・SE の再生
- **対応フォーマット**: WAV、Ogg Vorbis 等
- **対応プラットフォーム**: Windows、macOS、Linux

---

## 2. 採用理由

### 2.1 依存が少ない

CPAL をバックエンドに使用し、ネイティブオーディオ API を抽象化しています。大規模なメディアフレームワークに依存しません。

### 2.2 フォーマット対応

WAV（無圧縮）、Ogg Vorbis（圧縮）に対応。BGM は Vorbis で容量削減、SE は WAV で低レイテンシという使い分けが可能です。

### 2.3 クロスプラットフォーム

Windows（WASAPI）、macOS（CoreAudio）、Linux（ALSA/PulseAudio）で動作します。wgpu や winit と同じく、OS による分岐を最小化できます。

### 2.4 ゲーム用途に適している

ストリーミング再生、複数ソースの同時再生に対応。ゲームの BGM・SE の典型的なユースケースをカバーしています。

---

## 3. 本プロジェクトでの利用

- **用途**: ゲーム BGM、ヒット SE、レベルアップ SE、ボス出現 SE など
- **フォーマット**: WAV（SE）、Vorbis（BGM）
- **連携**: Rust 側のゲームループから再生トリガー。Elixir の EventBus でイベントを受けて再生する構成も可能

---

## 4. 関連ドキュメント

| ドキュメント | 用途 |
|-------------|------|
| [WHY_RUST.md](../WHY_RUST.md) | Rust 採用の技術的根拠。音声は Rust 担当 |
| [ELIXIR_RUST_DIVISION.md](../../ELIXIR_RUST_DIVISION.md) | 役割分担（音声のタイミングは Rust 側） |
