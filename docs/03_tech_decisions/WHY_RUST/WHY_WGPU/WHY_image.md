# なぜ image を使うのか

このドキュメントでは、画像ファイルの読み込みに image クレートを採用した技術的根拠を説明します。wgpu へのテクスチャアトラス提供に使用します。

---

## 目次

1. [image とは](#1-image-とは)
2. [採用理由](#2-採用理由)
3. [本プロジェクトでの利用](#3-本プロジェクトでの利用)
4. [関連ドキュメント](#4-関連ドキュメント)

---

## 1. image とは

image は、Rust で広く使われる画像デコード・エンコードライブラリです。

- **バージョン**: image 0.25（Cargo.toml）
- **役割**: PNG 等の画像ファイルをピクセルデータにデコード
- **用途**: スプライトアトラス（atlas.png）の読み込み

---

## 2. 採用理由

### 2.1 フォーマット対応

PNG、JPEG、GIF、BMP 等をサポート。ゲームのスプライトアトラスは主に PNG を使用するため十分です。

### 2.2 wgpu との連携

デコードした `ImageBuffer` を `bytemuck` 経由で wgpu の `Texture` にアップロードします。画像の幅・高さ・ピクセル形式を取得し、wgpu のテクスチャ作成に渡せます。

### 2.3 エコシステムの標準

Rust の画像処理では事実上の標準です。ドキュメント・サンプルが豊富で、wgpu チュートリアルでも image が使われています。

### 2.4 軽量

必要なフォーマットのみを feature で有効化でき、依存を絞り込めます。

---

## 3. 本プロジェクトでの利用

- **用途**: スプライトアトラス（assets/sprites/atlas.png）の読み込み
- **連携**: デコード → `bytemuck` で wgpu 用に変換 → `Queue::write_texture` でアップロード
- **形式**: RGBA8 等、wgpu が期待するフォーマットに変換

---

## 4. 関連ドキュメント

| ドキュメント | 用途 |
|-------------|------|
| [WHY_wgpu.md](./WHY_wgpu.md) | wgpu の選定理由 |
| [WHY_bytemuck.md](./WHY_bytemuck.md) | テクスチャデータの型変換 |
| [WHY_RUST.md](../WHY_RUST.md) | Rust 採用の技術的根拠 |
