# なぜ serde をシリアライズ基盤に選ぶのか

このドキュメントでは、シリアライズ・デシリアライズの基盤として serde を採用した技術的根拠を説明します。セーブ/ロード機能の土台となります。

---

## 目次

1. [serde とは](#1-serde-とは)
2. [採用理由](#2-採用理由)
3. [本プロジェクトでの利用](#3-本プロジェクトでの利用)
4. [関連ドキュメント](#4-関連ドキュメント)

---

## 1. serde とは

serde は、Rust で最も広く使われるシリアライズ・デシリアライズのトレイト定義ライブラリです。

- **バージョン**: serde 1（features: ["derive"]）（Cargo.toml）
- **役割**: `Serialize` / `Deserialize` トレイトの提供
- **用途**: ゲーム状態の永続化（セーブ/ロード）の型定義

---

## 2. 採用理由

### 2.1 Rust エコシステムの事実上の標準

JSON、TOML、bincode、MessagePack 等、多くのフォーマットが serde をサポートしています。基盤として serde を選ぶことで、フォーマットの差し替えが容易になります。

### 2.2 derive による簡潔さ

`#[derive(Serialize, Deserialize)]` で構造体にトレイトを付与できます。手動実装は不要で、フィールド追加時の修正も最小限です。

### 2.3 型安全

コンパイル時にシリアライズ可能な型が保証されます。実行時エラーを減らせます。

### 2.4 フォーマット非依存

serde はトレイトのみを提供し、実際のフォーマットは bincode 等の別クレートが担当します。バイナリ（bincode）や JSON に切り替え可能です。

---

## 3. 本プロジェクトでの利用

- **用途**: ゲーム状態（プレイヤー位置、HP、スコア、敵状態等）のシリアライズ
- **連携**: `bincode` でバイナリフォーマットに変換し、セーブファイルに書き込み
- **derive**: セーブ対象の構造体に `#[derive(Serialize, Deserialize)]` を付与

---

## 4. 関連ドキュメント

| ドキュメント | 用途 |
|-------------|------|
| [WHY_bincode.md](./WHY_bincode.md) | バイナリフォーマット（serde と組み合わせて使用） |
| [WHY_RUST.md](../WHY_RUST.md) | Rust 採用の技術的根拠 |
